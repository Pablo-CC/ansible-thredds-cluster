- name: Install httpd
  become: True
  yum:
    name: httpd
    state: latest

- set_fact:
    httpd_confd: "{{ server_root }}/conf.d"

- name: Create password for proxy status web pages
  become: True
  htpasswd:
    path: "{{ server_root }}/.htpasswd"
    username: "{{ applications.proxy.status.user }}"
    password: "{{ applications.proxy.status.password }}"

# Create httpd configuration
- name: Copy httpd.conf in host
  become: True
  template: 
    src: httpd.conf.j2
    dest: "{{ server_root }}/conf/httpd.conf"
  notify: restart httpd

# Create index.html page
- name: Create index page
  become: True
  template:
    src: "{{ httpd_index_html_template }}"
    dest: "{{ document_root }}/index.html"