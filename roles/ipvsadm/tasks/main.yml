---
#tasks file for lvs

- name: Create variable for VIP
  set_fact:
    vip: "{{ ansible_eth1.ipv4.address }}"

- name: Template LVS configure script for load-balancer
  become: False
  local_action:
    module: template
    src: lvs_script.sh.j2
    dest: files/lvs_script.sh
    mode: 0744

- name: Make sure ipvsadm.rules exists
  file:
    path: /etc/ipvsadm.rules
    state: touch

- name: Execute script
  script: files/lvs_script.sh
