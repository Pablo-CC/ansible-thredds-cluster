- name: Include vars when running in container
  include_vars:
    file: container.yml
  when: ansible_env.ANSIBLE_CONTAINER is defined

- name: Create {{ httpd_htdocs }}/thredds directory
  file:
    state: directory
    path: "{{ httpd_htdocs }}/thredds/catalog"

- name: Template static TDS catalog.html
  template:
     src: catalog.html.v{{ tds_version.split(".")[0] }}.j2
     dest: "{{ httpd_htdocs }}/thredds/catalog/catalog.html"
  
- name: Copy THREDDS static files
  copy:
    src: "{{ item }}"
    dest: "{{ httpd_htdocs }}/thredds/{{ item | basename }}"
  with_fileglob: v{{ tds_version[:1]|string }}/*
