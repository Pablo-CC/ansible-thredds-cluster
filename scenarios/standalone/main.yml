- hosts: localhost
  vars:
    root: "{{ playbook_dir }}/sandbox"
    tomcat_home: "{{ root }}/tomcat"
    tomcat_base: "{{ root }}"

    # These are defaults, they are showed here for illustration
    tomcat_http_port: 8080
    tomcat_Xmx: 4096m
    tomcat_Xms: 512m
    tds_version: 5.0.0-beta6
    #tds_content: "{{ tomcat_base }}/tomcat/content/thredds"
    tds_context: thredds
  roles:
    - role: jdk-source
    - role: tomcat-source
    - role: tomcat
    - role: tds
  tasks:
    - import_tasks: ../../utils/restart.yml

    - name: Clean
      file: path={{ root }} state=absent
      tags: [never, purge, clean]

    - name: Purge
      file: path={{ downloads }} state=absent
      tags: [never, purge]
