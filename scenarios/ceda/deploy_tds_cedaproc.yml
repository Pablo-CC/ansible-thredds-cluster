- name: Deploy tds
  hosts: hostA
  vars_files: 
    - cedaproc-secret.yml
  vars:
    virtualenv_name: TDS4GWS
    tomcat_instances:
      - name: "{{ inventory_hostname }}_1800"
        base_port: 1800
        ip_address: "{{ hostvars[ inventory_hostname ]['ansible_ssh_host'] }}"
        ip_internal_address: 192.168.3.5
        ajp: 
          port: 18009
        gws_instance: 
          - name: "{{ gws.0.name }}"
    gws:
      - name: cedaproc
        path: cedaproc/test
        location: "/gws/cedaproc"
  roles:
    - role: tds