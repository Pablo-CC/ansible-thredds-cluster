- name: Deploy tds
  hosts: hostD
  vars:
    user: hiresgw-manager
    password: hiresgw-manager
    supervisor_port: 9002
    virtualenv_name: TDS4GWS
    tds_instances:
      - name: "{{ inventory_hostname }}_2800"
        base_port: 2800
        ip_address: "{{ hostvars[ inventory_hostname ]['ansible_ssh_host'] }}"
        ip_internal_address: 192.168.3.5
        ajp: 
          port: 28009
        catalog: 
          name: "{{ catalogs.0.name }}"
    catalogs:
      - name: hiresgw
        path: hiresgw/test
        location: "{{ services_prefix }}/gws/hiresgw"
  roles:
    - role: tds