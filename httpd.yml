service_name: httpd
version: 2.4
subversion: 25
dependencies: 
    - gcc
    - gcc-c++
    - lynx
    
source: "http://apache.mirrors.tds.net/httpd/{{ service_name }}-{{ version }}.{{ subversion }}.tar.gz"
checksum: "https://www.apache.org/dist/httpd/{{ service_name }}-{{ version }}.{{ subversion }}.tar.gz.md5"
configure: --enable-mpms-shared=all --with-pcre={{ opt_service }}/{{ packages.2.name }} --with-apr={{ opt_service }}/{{ packages.0.name }} --with-apr-util={{ opt_service }}/{{ packages.1.name }}
packages:
  - name: apr
    version: 1.5
    subversion: 2
    configure:
    source: http://archive.apache.org/dist/apr/apr-1.5.2.tar.gz

  - name: apr-util
    version: 1.5
    subversion: 4
    configure: --with-apr={{ opt_service }}/apr
    source: http://archive.apache.org/dist/apr/apr-util-1.5.4.tar.gz
  
  - name: pcre
    version: 8
    subversion: 40
    configure:
    source: http://ftp.cs.stanford.edu/pub/exim/pcre/pcre-8.40.tar.gz

service: "{{ opt_service }}/bin/{{ service_name }}"
pidfile: "{{ opt_service }}/logs/{{ service_name }}.pid"
config: "{{ opt_service }}/conf/{{ service_name }}.conf"
configtest: "{{ opt_service }}/logs/{{ service_name }}_configtest.log"
conf_modules: conf.d